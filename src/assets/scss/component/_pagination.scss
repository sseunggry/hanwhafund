@use 'sass:map';
@use "../util" as *;

/* 페이지네이션 */
// 사이즈 정의
@mixin pagination-size-variable() {
  --#{$prefix}-pagination--gap: var(--#{$prefix}-gap-7) var(--#{$prefix}-gap-3);
  --#{$prefix}-pagination--large-margin-top: var(--#{$prefix}-large-gap-layout-title-body-large);
  --#{$prefix}-pagination--medium-margin-top: var(--#{$prefix}-medium-gap-layout-title-body-large);
  --#{$prefix}-pagination--small-margin-top: var(--#{$prefix}-small-gap-layout-title-body-large);
  --#{$prefix}-pagination--large-font-size: var(--#{$prefix}-large-font-size-body-medium);
  --#{$prefix}-pagination--medium-font-size: var(--#{$prefix}-medium-font-size-body-medium);
  --#{$prefix}-pagination--small-font-size: var(--#{$prefix}-small-font-size-body-medium);
  --#{$prefix}-pagination--navi-large-font-size: var(--#{$prefix}-large-font-size-label-medium);
  --#{$prefix}-pagination--navi-medium-font-size: var(--#{$prefix}-medium-font-size-label-medium);
  --#{$prefix}-pagination--navi-small-font-size: var(--#{$prefix}-small-font-size-label-medium);
  --#{$prefix}-pagination--navi-padding: var(--#{$prefix}-padding-1);
  --#{$prefix}-pagination--navi-gap: var(--#{$prefix}-gap-2);
  --#{$prefix}-pagination--navi-size: var(--#{$prefix}-size-small);
  --#{$prefix}-pagination--number-size: var(--#{$prefix}-size-medium);
  --#{$prefix}-pagination--icon-size: var(--#{$prefix}-size-xxsmall);
  --#{$prefix}-pagination--radius: var(--#{$prefix}-radius-medium);
  --#{$prefix}-pagination--total-large-font-size: var(--#{$prefix}-large-font-size-body-small);
  --#{$prefix}-pagination--total-medium-font-size: var(--#{$prefix}-medium-font-size-body-small);
  --#{$prefix}-pagination--total-small-font-size: var(--#{$prefix}-small-font-size-body-small);
  --#{$prefix}-pagination--total-padding-left: var(--#{$prefix}-padding-2);
  --#{$prefix}-pagination--total-padding-right: var(--#{$prefix}-padding-5);
}

// 컬러 정의
@mixin pagination-color-variable($mode: light) {
  --#{$prefix}-pagination--color-text: var(--#{$prefix}-#{$mode}-color-text-subtle);
  --#{$prefix}-pagination--color-text-active: var(--#{$prefix}-#{$mode}-color-text-inverse-static);
  --#{$prefix}-pagination--color-text-disabled: var(--#{$prefix}-#{$mode}-color-text-disabled);
  --#{$prefix}-pagination--color-action-inactive: var(--#{$prefix}-#{$mode}-color-action-transparency);
  --#{$prefix}-pagination--color-action-hover: var(--#{$prefix}-#{$mode}-color-action-neutral-hover);
  --#{$prefix}-pagination--color-action-pressed: var(--#{$prefix}-#{$mode}-color-action-neutral-pressed);
  --#{$prefix}-pagination--color-action-active: var(--#{$prefix}-#{$mode}-color-action-neutral-active);
  --#{$prefix}-pagination--color-action-disabled: var(--#{$prefix}-#{$mode}-color-action-transparency);
}

.#{$prefix}-pagination {
  @include pagination-color-variable(map.get($modes, 'light'));
  @include pagination-size-variable;

  & {
    @include flex-layout($ai: center, $jc: center);

    gap: var(--#{$prefix}-pagination--gap);
    width: 100%;
    margin-top: var(--#{$prefix}-pagination--large-margin-top);
    color: var(--#{$prefix}-pagination--color-text);

		@include size-medium-to-large {
			margin-top: var(--#{$prefix}-pagination--medium-margin-top);
		}

		@include size-medium {
			margin-top: var(--#{$prefix}-pagination--small-margin-top);
		}
  }

  .page-navi,
  .page-link {
    @include flex-layout($d: inline-flex, $jc: center, $ai: center);

    background-color: var(--#{$prefix}-pagination--color-action-inactive);
    border-radius: var(--#{$prefix}-pagination--radius);
    transition: var(--#{$prefix}-transition-base);

    &:hover {
      background-color: var(--#{$prefix}-pagination--color-action-hover);
    }

    &:active {
      background-color: var(--#{$prefix}-pagination--color-action-pressed);
    }
  }

  .page-navi {
		gap: var(--#{$prefix}-pagination--navi-gap);
		padding: 0 var(--#{$prefix}-pagination--navi-padding);
		height: var(--#{$prefix}-pagination--navi-size);
		font-size: var(--#{$prefix}-pagination--navi-large-font-size);

		@include size-medium-to-large {
			font-size: var(--#{$prefix}-pagination--navi-medium-font-size);
		}

		@include size-medium {
			font-size: var(--#{$prefix}-pagination--navi-small-font-size);
		}

    &.prev {
      order: 1;

      &::before {
        @include flex-layout($d: inline-flex, $jc: center, $ai: center);
        @include pseudo;
        @include svg-icon($size: var(--#{$prefix}-pagination--icon-size), $mode: light);
        @include icon-set(ico_angle);

        background-color: var(--#{$prefix}-pagination--color-text);
        transform: rotate(90deg);
      }
    }

    &.next {
      order: 3;

      &::after {
        @include flex-layout($d: inline-flex, $jc: center, $ai: center);
        @include pseudo;
        @include svg-icon($size: var(--#{$prefix}-pagination--icon-size), $mode: light);
        @include icon-set(ico_angle);

        background-color: var(--#{$prefix}-pagination--color-text);
        transform: rotate(-90deg);
      }
    }

    &.disabled {
      $color: var(--#{$prefix}-pagination--color-text-disabled);

      color: $color;

      &:hover,
      &:active {
        background-color: var(--#{$prefix}-pagination--color-action-disabled);
      }

      &::before,
      &::after {
        background-color: $color;
      }
    }
  }

  .page-links {
    @include flex-layout($jc: center, $ai: center);

    order: 2;
    gap: var(--#{$prefix}-gap-3);

    .page-link {
      @include square(var(--#{$prefix}-pagination--number-size));
			font-size: var(--#{$prefix}-pagination--large-font-size);
			
			@include size-medium-to-large {
				font-size: var(--#{$prefix}-pagination--medium-font-size);
			}
	
			@include size-medium {
				font-size: var(--#{$prefix}-pagination--small-font-size);
			}

      &.link-dot {
        @include svg-icon($mode: light);
        @include icon-set(ico_ellipsis);
      }

      &.active {
        background-color: var(--#{$prefix}-pagination--color-action-active);
        font-weight: var(--#{$prefix}-font-weight-bold);
        color: var(--#{$prefix}-pagination--color-text-active);
      }
    }
  }

  + .helper-box {
    margin-top: var(--#{$prefix}-padding-10);
  }

	//select
	.#{$prefix}-form-select{
		width: auto;
		font-size: var(--#{$prefix}-pagination--total-large-font-size);

		+ .page-total{
			padding: 0 var(--#{$prefix}-pagination--total-padding-right) 0 var(--#{$prefix}-pagination--total-padding-left);
			font-size: var(--#{$prefix}-pagination--total-large-font-size);

			@include size-medium-to-large {
				font-size: var(--#{$prefix}-pagination--total-medium-font-size);
			}
	
			@include size-medium {
				font-size: var(--#{$prefix}-pagination--total-small-font-size);
			}
		}
	}
}

// 고대비모드
@include color-mode($mode: high-contrast) {
  .#{$prefix}-pagination {
    @include pagination-color-variable(map.get($modes, 'high-contrast'));

    .page-navi {
      &.prev {
        &::before {
          @include svg-icon($size: var(--#{$prefix}-pagination--icon-size), $mode: map.get($modes, 'high-contrast'));
        }
      }

      &.next {
        &::after {
          @include svg-icon($size: var(--#{$prefix}-pagination--icon-size), $mode: map.get($modes, 'high-contrast'));
        }
      }
    }

    .page-links {
      .page-link {
        &.link-dot {
          @include svg-icon($mode: map.get($modes, 'high-contrast'));
        }
      }
    }
  }
}

// 태블릿 & 모바일 전용 속성
@include size-medium {
  .#{$prefix}-pagination {
    .page-links {
			.page-link{
				&:nth-child(5),
				&:nth-child(6),
				&:nth-child(7),
				&:nth-child(8){
					display: none;
				}
			}
    }

		//number button
		&.type-number-button{
			flex-wrap: wrap;
			gap: var(--#{$prefix}-gap-5) var(--#{$prefix}-gap-9);
			.page-links {
				width: 100%;
			}

			.page-navi {
				&.next {
					transition: none;
					order: 1;
				}
			}
		}

    + .helper-box {
      margin-top: var(--#{$prefix}-padding-9);
    }
  }
}