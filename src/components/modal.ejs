<%
  const localsSafe = locals || {};
  const id = localsSafe.id || 'modal-default';
  const title = localsSafe.title || ''; // 모달 제목 (HTML 가능)
  const content = localsSafe.content || ''; // 모달 본문 내용 (HTML 가능)
  const variant = localsSafe.variant || 'modal'; // variant: modal(기본), bottom-sheet, full
  const buttonLayout = localsSafe.buttonLayout || ''; // buttonLayout: default(기본), column
  const buttonAddClass = localsSafe.buttonAddClass || ''; // buttonLayout: default(기본), column
  const buttons = Array.isArray(localsSafe.buttons) ? localsSafe.buttons : []; // buttons: [{ text: '확인', class: 'primary medium', action: 'close'/'custom', customAttr: '...' }, ...]
  const showCloseBtn = localsSafe.showCloseBtn !== false; // X 닫기 버튼 표시 여부 (기본 true)
  const addClass = localsSafe.addClass || '';
  const open = localsSafe.open || false;
  const scrollable = localsSafe.scrollable || false; // 내용 영역 스크롤 시 tabindex 추가 여부

  const titleId = `tit_${id}`;
  const modalClasses = [
    `modal`,
    'fade',
    variant,
    addClass,
    open ? 'show in' : '',
  ].filter(Boolean).join(' ');
	
  const dialogClasses = ['modal-dialog'].filter(Boolean).join(' ');
  const btnWrapClasses = [
    'modal-btn',
    'btn-wrap',
    buttonLayout,
    buttonAddClass,
  ].filter(Boolean).join(' ');
-%>
<div
  id="<%= id %>"
  class="<%= modalClasses %>"
  role="dialog"
  aria-modal="true"
  aria-labelledby="<%= titleId %>"
  data-type="<%= variant %>"
>
  <div class="<%= dialogClasses %>">
    <div class="modal-content">
      <%_ if (title) { -%>
        <div class="modal-header">
          <h2 id="<%= titleId %>" class="modal-title"><%- title %></h2>
        </div>
      <%_ } -%>
      <div class="modal-conts" <%= scrollable ? 'tabindex="0"' : '' %>>
        <%- content %>
      </div>
      <%_ if (buttons.length > 0) { -%>
      <div class="<%= btnWrapClasses %>">
        <%_ buttons.forEach(button => { -%>
        <%
          const btnText = button.text || '버튼';
          const btnClasses = [
            `btn`,
            button.class || '', // 기본값 설정
            button.action === 'close' ? 'btn-close' : '' // 닫기 액션 시 클래스 추가
          ].filter(Boolean).join(' ');
          const btnAriaControls = button.action === 'close' ? `aria-controls="${id}"` : '';
          const btnCustomAttr = button.customAttr || ''; // 추가 속성
        -%>
        <button
          type="button"
          class="<%= btnClasses %>"
          <%- btnAriaControls %>
          <%- btnCustomAttr %>
        >
          <%= btnText %>
        </button>
        <%_ }); -%>
      </div>
      <%_ } -%>
      <%_ if (showCloseBtn) { -%>
        <button
          type="button"
          class="btn icon btn-close"
          aria-controls="<%= id %>"
        >
          <span class="sr-only">닫기</span>
          <i class="svg-icon icon-close"></i>
        </button>
      <%_ } -%>
    </div>
  </div>
	<div class="modal-back in"></div>
</div>